# 数据规范

本文档定义 DF-HGNN 项目中超图数据的统一格式与质量要求。

## 原始文件

- **vertices (`*-nverts.txt`)**: 每行一个节点标识，按整数索引排序。
- **simplices (`*-simplices.txt`)**: 每行描述一个超边，使用空格分隔的节点索引。
- **times (`*-times.txt`)**: 每行一个时间戳（可选），与 `simplices` 行号对应。

## 预处理产物

预处理脚本需输出以下张量文件（Torch `pt` 或 NumPy `npz`）：

- `X`: 节点特征矩阵，形状为 `(num_nodes, num_features)`。
- `Y`: 节点标签或回归目标，形状 `(num_nodes,)` 或 `(num_nodes, target_dim)`。
- `H`: 入射矩阵稀疏表示，提供 `indices`, `values`, `shape`。
- `E`: 超边属性（可选）。
- `splits`: 训练/验证/测试划分索引。

## 质量检查

- 节点索引连续、起始为 0。
- 超边基数 ≥ 2，若存在重复超边需去重或合并权重。
- 时间戳缺失时默认填充为 0。
- 对原始与派生特征执行缺失值检测与异常裁剪（如按 0.5%–99.5% 分位截断）。

## 特征标准化

确定性特征在拼接前必须执行零均值单位方差标准化并保存统计量，确保线上/离线一致。

## 版本控制

- 原始数据：以 `data/raw/<dataset>/<version>` 形式存储，并在 README 中记录来源与校验和。
- 预处理产物：使用 DVC 或 MLflow Artifact 管理，保持可追溯性。
